{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\Desktop\\\\dpma\\\\frontend\\\\src\\\\components\\\\users\\\\friends.jsx\";\nimport React, { useState, useEffect } from \"react\";\nimport { Search, SvgSearch } from \"../../assets/icons/icons\";\nimport { useForm } from \"react-hook-form\";\nimport UserPlaceholder from \"./user-placeholder\";\nimport { useFetch } from \"../../shared/hooks/useFetch\";\nimport UserItem from \"./users.js\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport InfiniteScroll from \"react-infinite-scroll-component\";\nconst Friends = React.memo(() => {\n  const users = useSelector(state => state.searchedUsers);\n  const {\n    register,\n    handleSubmit,\n    errors\n  } = useForm();\n  const {\n    loading,\n    request,\n    error\n  } = useFetch();\n  const dispatch = useDispatch();\n  const [length, setLength] = useState(0);\n  const [hasMore, setHasMore] = useState(true);\n  const [key, setKey] = useState(null);\n\n  const handleUsers = async (word, n) => {\n    try {\n      const responseData = await request(process.env.REACT_APP_BACKEND_URL + `/users?q=${word}&skip=${n ? 0 : users.length}`, \"get\");\n      if (responseData.data.users.length < 10) setHasMore(false);\n      if (n) setLength(responseData.data.length);\n\n      if (n && !responseData.data.length) {\n        dispatch({\n          type: \"NEW_SEARCH\",\n          payload: []\n        });\n      }\n\n      if (n) {\n        dispatch({\n          type: \"NEW_SEARCH\",\n          payload: responseData.data.users\n        });\n      } else {\n        dispatch({\n          type: \"SAVE_SEARCH\",\n          payload: responseData.data.users\n        });\n      }\n    } catch (err) {\n      console.log(error);\n    }\n  };\n\n  const onSubmit = data => {\n    setKey(data.keyword);\n    handleUsers(data.keyword.trim(), true);\n  };\n\n  useEffect(() => {\n    document.title = \"Friends\";\n  }, []);\n  return React.createElement(\"div\", {\n    className: \"friends\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"friends__container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"friends__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"friends__form__unit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 50\n    },\n    __self: this\n  }, React.createElement(\"input\", {\n    type: \"text\",\n    name: \"keyword\",\n    className: \"friends__search\",\n    ref: register,\n    required: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 51\n    },\n    __self: this\n  }), React.createElement(\"span\", {\n    className: \"icon\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(Search, {\n    width: \"2.2rem\",\n    height: \"2.2rem\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  })), React.createElement(\"button\", {\n    className: \"btn btn--contained1-primary mg-none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  }, \" \", \"Search\")))), React.createElement(\"div\", {\n    className: \"friends__users\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69\n    },\n    __self: this\n  }, loading && React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(UserPlaceholder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  }), React.createElement(UserPlaceholder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 73\n    },\n    __self: this\n  }), React.createElement(UserPlaceholder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74\n    },\n    __self: this\n  }), React.createElement(UserPlaceholder, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  })), users.length && !loading && React.createElement(InfiniteScroll, {\n    dataLength: length,\n    next: () => handleUsers(key),\n    hasMore: key ? hasMore : false,\n    loader: React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \" \", React.createElement(UserPlaceholder, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86\n      },\n      __self: this\n    }), React.createElement(UserPlaceholder, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 87\n      },\n      __self: this\n    })),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }, users.map(user => React.createElement(UserItem, {\n    user: user,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93\n    },\n    __self: this\n  })), \";\"), \" \", !users.length && key && React.createElement(\"h1\", {\n    className: \"text-center no-more\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99\n    },\n    __self: this\n  }, \"no users found!\"), !users.length && !key && !loading && React.createElement(\"div\", {\n    className: \"img-container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102\n    },\n    __self: this\n  }, React.createElement(SvgSearch, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103\n    },\n    __self: this\n  })))));\n}); //\n\nexport default Friends;","map":{"version":3,"sources":["C:/Users/GIGABYTE/Desktop/dpma/frontend/src/components/users/friends.jsx"],"names":["React","useState","useEffect","Search","SvgSearch","useForm","UserPlaceholder","useFetch","UserItem","useSelector","useDispatch","InfiniteScroll","Friends","memo","users","state","searchedUsers","register","handleSubmit","errors","loading","request","error","dispatch","length","setLength","hasMore","setHasMore","key","setKey","handleUsers","word","n","responseData","process","env","REACT_APP_BACKEND_URL","data","type","payload","err","console","log","onSubmit","keyword","trim","document","title","map","user"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAAyBC,SAAzB,QAA0C,OAA1C;AACA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,0BAAlC;AACA,SAASC,OAAT,QAAwB,iBAAxB;AACA,OAAOC,eAAP,MAA4B,oBAA5B;AACA,SAASC,QAAT,QAAyB,6BAAzB;AACA,OAAOC,QAAP,MAAqB,YAArB;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,OAAOC,cAAP,MAA2B,iCAA3B;AACA,MAAMC,OAAO,GAAGZ,KAAK,CAACa,IAAN,CAAW,MAAM;AAC/B,QAAMC,KAAK,GAAGL,WAAW,CAAEM,KAAD,IAAWA,KAAK,CAACC,aAAlB,CAAzB;AACA,QAAM;AAAEC,IAAAA,QAAF;AAAYC,IAAAA,YAAZ;AAA0BC,IAAAA;AAA1B,MAAqCd,OAAO,EAAlD;AACA,QAAM;AAAEe,IAAAA,OAAF;AAAWC,IAAAA,OAAX;AAAoBC,IAAAA;AAApB,MAA8Bf,QAAQ,EAA5C;AACA,QAAMgB,QAAQ,GAAGb,WAAW,EAA5B;AACA,QAAM,CAACc,MAAD,EAASC,SAAT,IAAsBxB,QAAQ,CAAC,CAAD,CAApC;AACA,QAAM,CAACyB,OAAD,EAAUC,UAAV,IAAwB1B,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAM,CAAC2B,GAAD,EAAMC,MAAN,IAAgB5B,QAAQ,CAAC,IAAD,CAA9B;;AACA,QAAM6B,WAAW,GAAG,OAAOC,IAAP,EAAaC,CAAb,KAAmB;AACrC,QAAI;AACF,YAAMC,YAAY,GAAG,MAAMZ,OAAO,CAChCa,OAAO,CAACC,GAAR,CAAYC,qBAAZ,GACG,YAAWL,IAAK,SAAQC,CAAC,GAAG,CAAH,GAAOlB,KAAK,CAACU,MAAO,EAFhB,EAGhC,KAHgC,CAAlC;AAKA,UAAIS,YAAY,CAACI,IAAb,CAAkBvB,KAAlB,CAAwBU,MAAxB,GAAiC,EAArC,EAAyCG,UAAU,CAAC,KAAD,CAAV;AACzC,UAAIK,CAAJ,EAAOP,SAAS,CAACQ,YAAY,CAACI,IAAb,CAAkBb,MAAnB,CAAT;;AACP,UAAIQ,CAAC,IAAI,CAACC,YAAY,CAACI,IAAb,CAAkBb,MAA5B,EAAoC;AAClCD,QAAAA,QAAQ,CAAC;AAAEe,UAAAA,IAAI,EAAE,YAAR;AAAsBC,UAAAA,OAAO,EAAE;AAA/B,SAAD,CAAR;AACD;;AACD,UAAIP,CAAJ,EAAO;AACLT,QAAAA,QAAQ,CAAC;AAAEe,UAAAA,IAAI,EAAE,YAAR;AAAsBC,UAAAA,OAAO,EAAEN,YAAY,CAACI,IAAb,CAAkBvB;AAAjD,SAAD,CAAR;AACD,OAFD,MAEO;AACLS,QAAAA,QAAQ,CAAC;AAAEe,UAAAA,IAAI,EAAE,aAAR;AAAuBC,UAAAA,OAAO,EAAEN,YAAY,CAACI,IAAb,CAAkBvB;AAAlD,SAAD,CAAR;AACD;AACF,KAhBD,CAgBE,OAAO0B,GAAP,EAAY;AACZC,MAAAA,OAAO,CAACC,GAAR,CAAYpB,KAAZ;AACD;AACF,GApBD;;AAqBA,QAAMqB,QAAQ,GAAIN,IAAD,IAAU;AACzBR,IAAAA,MAAM,CAACQ,IAAI,CAACO,OAAN,CAAN;AACAd,IAAAA,WAAW,CAACO,IAAI,CAACO,OAAL,CAAaC,IAAb,EAAD,EAAsB,IAAtB,CAAX;AACD,GAHD;;AAIC3C,EAAAA,SAAS,CAAC,MAAI;AACb4C,IAAAA,QAAQ,CAACC,KAAT,GAAe,SAAf;AACA,GAFQ,EAEP,EAFO,CAAT;AAGD,SACE;AAAK,IAAA,SAAS,EAAC,SAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,oBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,iBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAM,IAAA,QAAQ,EAAE7B,YAAY,CAACyB,QAAD,CAA5B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,SAFP;AAGE,IAAA,SAAS,EAAC,iBAHZ;AAIE,IAAA,GAAG,EAAE1B,QAJP;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAQE;AAAM,IAAA,SAAS,EAAC,MAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,MAAD;AAAQ,IAAA,KAAK,EAAC,QAAd;AAAuB,IAAA,MAAM,EAAC,QAA9B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CARF,EAWE;AAAQ,IAAA,SAAS,EAAC,qCAAlB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACG,GADH,WAXF,CADF,CADF,CADF,EAsBE;AAAK,IAAA,SAAS,EAAC,gBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGG,OAAO,IACN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,EAEE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,EAGE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,EAIE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAJF,CAFJ,EASGN,KAAK,CAACU,MAAN,IAAgB,CAACJ,OAAjB,IACC,oBAAC,cAAD;AACE,IAAA,UAAU,EAAEI,MADd;AAEE,IAAA,IAAI,EAAE,MAAMM,WAAW,CAACF,GAAD,CAFzB;AAGE,IAAA,OAAO,EAAEA,GAAG,GAAGF,OAAH,GAAa,KAH3B;AAIE,IAAA,MAAM,EACJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACG,GADH,EAEE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAFF,EAGE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MAHF,CALJ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAaGZ,KAAK,CAACkC,GAAN,CAAWC,IAAD,IACT,oBAAC,QAAD;AAAU,IAAA,IAAI,EAAEA,IAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADD,CAbH,MAVJ,EA4BK,GA5BL,EA6BG,CAACnC,KAAK,CAACU,MAAP,IAAiBI,GAAjB,IACC;AAAI,IAAA,SAAS,EAAC,qBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA9BJ,EAgCG,CAACd,KAAK,CAACU,MAAP,IAAiB,CAACI,GAAlB,IAAyB,CAACR,OAA1B,IACC;AAAK,IAAA,SAAS,EAAC,eAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACE,oBAAC,SAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAjCJ,CAtBF,CADF,CADF;AAiED,CArGe,CAAhB,C,CAsGA;;AAEA,eAAeR,OAAf","sourcesContent":["import React, { useState,useEffect } from \"react\";\r\nimport { Search, SvgSearch } from \"../../assets/icons/icons\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport UserPlaceholder from \"./user-placeholder\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport UserItem from \"./users.js\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nconst Friends = React.memo(() => {\r\n  const users = useSelector((state) => state.searchedUsers);\r\n  const { register, handleSubmit, errors } = useForm();\r\n  const { loading, request, error } = useFetch();\r\n  const dispatch = useDispatch();\r\n  const [length, setLength] = useState(0);\r\n  const [hasMore, setHasMore] = useState(true);\r\n  const [key, setKey] = useState(null);\r\n  const handleUsers = async (word, n) => {\r\n    try {\r\n      const responseData = await request(\r\n        process.env.REACT_APP_BACKEND_URL +\r\n          `/users?q=${word}&skip=${n ? 0 : users.length}`,\r\n        \"get\"\r\n      );\r\n      if (responseData.data.users.length < 10) setHasMore(false);\r\n      if (n) setLength(responseData.data.length);\r\n      if (n && !responseData.data.length) {\r\n        dispatch({ type: \"NEW_SEARCH\", payload: [] });\r\n      }\r\n      if (n) {\r\n        dispatch({ type: \"NEW_SEARCH\", payload: responseData.data.users });\r\n      } else {\r\n        dispatch({ type: \"SAVE_SEARCH\", payload: responseData.data.users });\r\n      }\r\n    } catch (err) {\r\n      console.log(error);\r\n    }\r\n  };\r\n  const onSubmit = (data) => {\r\n    setKey(data.keyword);\r\n    handleUsers(data.keyword.trim(), true);\r\n  };\r\n   useEffect(()=>{\r\n    document.title=\"Friends\";\r\n   },[])\r\n  return (\r\n    <div className=\"friends\">\r\n      <div className=\"friends__container\">\r\n        <div className=\"friends__header\">\r\n          <form onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"friends__form__unit\">\r\n              <input\r\n                type=\"text\"\r\n                name=\"keyword\"\r\n                className=\"friends__search\"\r\n                ref={register}\r\n                required\r\n              />\r\n              <span className=\"icon\">\r\n                <Search width=\"2.2rem\" height=\"2.2rem\" />\r\n              </span>\r\n              <button className=\"btn btn--contained1-primary mg-none\">\r\n                {\" \"}\r\n                Search\r\n              </button>\r\n            </div>\r\n          </form>\r\n        </div>\r\n\r\n        <div className=\"friends__users\">\r\n          {loading && (\r\n            <div>\r\n              <UserPlaceholder />\r\n              <UserPlaceholder />\r\n              <UserPlaceholder />\r\n              <UserPlaceholder />\r\n            </div>\r\n          )}\r\n          {users.length && !loading && (\r\n            <InfiniteScroll\r\n              dataLength={length}\r\n              next={() => handleUsers(key)}\r\n              hasMore={key ? hasMore : false}\r\n              loader={\r\n                <div>\r\n                  {\" \"}\r\n                  <UserPlaceholder />\r\n                  <UserPlaceholder />\r\n                </div>\r\n              }\r\n            \r\n            >\r\n              {users.map((user) => (\r\n                <UserItem user={user} />\r\n              ))}\r\n              ;\r\n            </InfiniteScroll>\r\n          )}{\" \"}\r\n          {!users.length && key && (\r\n            <h1 className=\"text-center no-more\">no users found!</h1>\r\n          )}\r\n          {!users.length && !key && !loading && (\r\n            <div className=\"img-container\">\r\n              <SvgSearch />\r\n            </div>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n//\r\n\r\nexport default Friends;\r\n"]},"metadata":{},"sourceType":"module"}