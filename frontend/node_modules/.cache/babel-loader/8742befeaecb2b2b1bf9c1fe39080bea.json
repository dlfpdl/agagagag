{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\Desktop\\\\dpma\\\\frontend\\\\src\\\\components\\\\posts\\\\edit-post.js\";\nimport React, { useEffect, useState } from \"react\";\nimport Loading from \"../../shared/models/loading-modal\";\nimport { useForm } from \"react-hook-form\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useFetch } from \"../../shared/hooks/useFetch\";\n\nconst EditPost = props => {\n  const {\n    register,\n    handleSubmit\n  } = useForm();\n  const {\n    error,\n    loading,\n    request\n  } = useFetch();\n  const id = props.match.params.id;\n  const [title, setTitle] = useState(props.location.state ? props.location.state.title : null);\n  const dispatch = useDispatch();\n  const token = useSelector(state => state.isSignedIn);\n\n  const onSubmit = async data => {\n    try {\n      await request(process.env.REACT_APP_BACKEND_URL + `/posts/edit/${id}`, \"patch\", data, {\n        Authorization: \"Bearer \" + token\n      });\n      dispatch({\n        type: \"EDIT_POST\",\n        payload: {\n          id,\n          title: data.title\n        }\n      });\n      props.history.push(\"/\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const fetchPost = async () => {\n    try {\n      const res = await request(process.env.REACT_APP_BACKEND_URL + `/posts/${id}`);\n      setTitle(res.data.post ? res.data.post.title : \"\");\n      if (!res.data.post) props.history.push(\"/\");\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  useEffect(() => {\n    document.title = \"Edit your post\";\n\n    if (!title) {\n      fetchPost();\n    }\n  }, []);\n\n  if (!title && loading) {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 58\n      },\n      __self: this\n    }, React.createElement(Loading, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 59\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(\"div\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 64\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"profile__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"profile__header--icon\",\n    onClick: () => props.history.goBack(),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 66\n    },\n    __self: this\n  }, React.createElement(\"svg\", {\n    viewBox: \"0 0 24 24\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70\n    },\n    __self: this\n  }, React.createElement(\"g\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(\"path\", {\n    d: \"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })))), React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76\n    },\n    __self: this\n  }, \"Edit Your Post\")), React.createElement(\"div\", {\n    className: \"form__container\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 78\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"divider\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79\n    },\n    __self: this\n  }), React.createElement(\"div\", {\n    className: \"form__heading\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 80\n    },\n    __self: this\n  }, React.createElement(\"h3\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81\n    },\n    __self: this\n  }, \"Edit a post\")), React.createElement(\"div\", {\n    className: \"form\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83\n    },\n    __self: this\n  }, React.createElement(\"form\", {\n    className: \"form__body big\",\n    onSubmit: handleSubmit(onSubmit),\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__unit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"form__unit features\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 86\n    },\n    __self: this\n  }, React.createElement(\"textarea\", {\n    ref: register,\n    defaultValue: title,\n    name: \"title\",\n    placeholder: \"what in your mind..?\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 87\n    },\n    __self: this\n  }))), React.createElement(\"button\", {\n    disabled: loading,\n    className: \"btn btn--contained1-primary mg-none\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95\n    },\n    __self: this\n  }, loading ? \"Updating....\" : \"Update\")))));\n};\n\nexport default EditPost;","map":{"version":3,"sources":["C:/Users/GIGABYTE/Desktop/dpma/frontend/src/components/posts/edit-post.js"],"names":["React","useEffect","useState","Loading","useForm","useSelector","useDispatch","useFetch","EditPost","props","register","handleSubmit","error","loading","request","id","match","params","title","setTitle","location","state","dispatch","token","isSignedIn","onSubmit","data","process","env","REACT_APP_BACKEND_URL","Authorization","type","payload","history","push","err","console","log","fetchPost","res","post","document","goBack"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport Loading from \"../../shared/models/loading-modal\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\n\r\nconst EditPost = (props) => {\r\n  const { register, handleSubmit } = useForm();\r\n  const { error, loading, request } = useFetch();\r\n  const id = props.match.params.id;\r\n  const [title, setTitle] = useState(\r\n    props.location.state ? props.location.state.title : null\r\n  );\r\n  const dispatch = useDispatch();\r\n  const token = useSelector((state) => state.isSignedIn);\r\n  const onSubmit = async (data) => {\r\n    try {\r\n      await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/posts/edit/${id}`,\r\n        \"patch\",\r\n        data,\r\n        {\r\n          Authorization: \"Bearer \" + token,\r\n        }\r\n      );\r\n      dispatch({\r\n        type: \"EDIT_POST\",\r\n        payload: {\r\n          id,\r\n          title: data.title,\r\n        },\r\n      });\r\n      props.history.push(\"/\");\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const fetchPost = async () => {\r\n    try {\r\n      const res = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/posts/${id}`\r\n      );\r\n      setTitle(res.data.post ? res.data.post.title : \"\");\r\n      if (!res.data.post) props.history.push(\"/\");\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  useEffect(() => {\r\n    document.title=\"Edit your post\"\r\n    if (!title) {\r\n      fetchPost();\r\n    }\r\n  }, []);\r\n\r\n  if (!title && loading) {\r\n    return (\r\n      <div>\r\n        <Loading />\r\n      </div>\r\n    );\r\n  }\r\n  return (\r\n    <div>\r\n      <div className=\"profile__header\">\r\n        <div\r\n          className=\"profile__header--icon\"\r\n          onClick={() => props.history.goBack()}\r\n        >\r\n          <svg viewBox=\"0 0 24 24\">\r\n            <g>\r\n              <path d=\"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\"></path>\r\n            </g>\r\n          </svg>\r\n        </div>\r\n        <h2>Edit Your Post</h2>\r\n      </div>\r\n      <div className=\"form__container\">\r\n        <div className=\"divider\" />\r\n        <div className=\"form__heading\">\r\n          <h3>Edit a post</h3>\r\n        </div>\r\n        <div className=\"form\">\r\n          <form className=\"form__body big\" onSubmit={handleSubmit(onSubmit)}>\r\n            <div className=\"form__unit\">\r\n              <div className=\"form__unit features\">\r\n                <textarea\r\n                  ref={register}\r\n                  defaultValue={title}\r\n                  name=\"title\"\r\n                  placeholder=\"what in your mind..?\"\r\n                ></textarea>\r\n              </div>\r\n            </div>\r\n            <button\r\n              disabled={loading}\r\n              className=\"btn btn--contained1-primary mg-none\"\r\n            >\r\n              {loading ? \"Updating....\" : \"Update\"}\r\n            </button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\nexport default EditPost;\r\n"]},"metadata":{},"sourceType":"module"}