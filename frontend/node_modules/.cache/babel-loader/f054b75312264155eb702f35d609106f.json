{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\Desktop\\\\dpma\\\\frontend\\\\src\\\\components\\\\chat\\\\chat-header.js\";\nimport React, { useState, useEffect, useRef } from \"react\";\nimport { Arrow, Attachment } from \"../../assets/icons/icons\";\nimport ChatInfo from \"./chat-info\";\nimport { useFetch } from \"../../shared/hooks/useFetch\";\nimport ErrorModal from \"../../shared/models/error-model\";\nimport Loading from \"../../shared/models/loading-modal\";\n\nconst CahtHeader = ({\n  roomInfo,\n  token,\n  userId,\n  serverSendMessage\n}) => {\n  const {\n    loading,\n    request,\n    error,\n    clearError\n  } = useFetch();\n  const filePickerRef = useRef(null);\n  const [files, setFiles] = useState();\n  const [info, setInfo] = useState(false);\n\n  const CloseInfo = () => {\n    setInfo(false);\n  };\n\n  const pickImageHandler = () => {\n    filePickerRef.current.click();\n  };\n\n  const sendMessage = async img => {\n    try {\n      const formData = new FormData();\n      formData.append(\"userId\", userId);\n      formData.append(\"roomId\", roomInfo._id);\n      formData.append(\"img\", img);\n      const response = await request(process.env.REACT_APP_BACKEND_URL + \"/messages/send\", \"post\", formData, {\n        Authorization: \"Bearer \" + token\n      });\n      serverSendMessage(response.data.message);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const pickedHandler = event => {\n    if (event.target.files && event.target.files.length === 1) {\n      sendMessage(event.target.files[0]);\n    }\n  };\n\n  return React.createElement(\"div\", {\n    className: \"chat__messages__header\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45\n    },\n    __self: this\n  }, error && React.createElement(ErrorModal, {\n    state: \"error\",\n    closeModal: clearError,\n    message: error,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47\n    },\n    __self: this\n  }), loading && React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49\n    },\n    __self: this\n  }), roomInfo && React.createElement(React.Fragment, null, React.createElement(\"div\", {\n    className: \"chat__messages__header__user\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 52\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"chat__messages__header--img\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53\n    },\n    __self: this\n  }, React.createElement(\"img\", {\n    src: roomInfo.chatIcon,\n    alt: \"aa\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54\n    },\n    __self: this\n  })), React.createElement(\"h2\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 56\n    },\n    __self: this\n  }, roomInfo.name)), React.createElement(\"div\", {\n    className: \"chat__messages__header--options\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 58\n    },\n    __self: this\n  }, React.createElement(\"div\", {\n    className: \"icon\",\n    onClick: pickImageHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 59\n    },\n    __self: this\n  }, React.createElement(Attachment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 60\n    },\n    __self: this\n  }), React.createElement(\"input\", {\n    ref: filePickerRef,\n    style: {\n      display: \"none\"\n    },\n    type: \"file\",\n    accept: \".png,.jpg,.jpeg,.pdf,.svg\",\n    onChange: pickedHandler,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61\n    },\n    __self: this\n  })), info && React.createElement(\"div\", {\n    className: \"chat__room__wrapper\",\n    onClick: CloseInfo,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 71\n    },\n    __self: this\n  }, React.createElement(ChatInfo, {\n    CloseInfo: CloseInfo,\n    roomId: roomInfo._id,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 72\n    },\n    __self: this\n  })), React.createElement(\"div\", {\n    className: `icon`,\n    onClick: e => {\n      e.stopPropagation();\n      setInfo(e => !e);\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75\n    },\n    __self: this\n  }, React.createElement(Arrow, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82\n    },\n    __self: this\n  })))));\n};\n\nexport default CahtHeader;","map":{"version":3,"sources":["C:/Users/GIGABYTE/Desktop/dpma/frontend/src/components/chat/chat-header.js"],"names":["React","useState","useEffect","useRef","Arrow","Attachment","ChatInfo","useFetch","ErrorModal","Loading","CahtHeader","roomInfo","token","userId","serverSendMessage","loading","request","error","clearError","filePickerRef","files","setFiles","info","setInfo","CloseInfo","pickImageHandler","current","click","sendMessage","img","formData","FormData","append","_id","response","process","env","REACT_APP_BACKEND_URL","Authorization","data","message","err","console","log","pickedHandler","event","target","length","chatIcon","name","display","e","stopPropagation"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\r\nimport { Arrow, Attachment } from \"../../assets/icons/icons\";\r\nimport ChatInfo from \"./chat-info\";\r\nimport { useFetch } from \"../../shared/hooks/useFetch\";\r\nimport ErrorModal from \"../../shared/models/error-model\";\r\nimport Loading from \"../../shared/models/loading-modal\";\r\n\r\nconst CahtHeader = ({ roomInfo, token, userId, serverSendMessage }) => {\r\n  const { loading, request, error, clearError } = useFetch();\r\n  const filePickerRef = useRef(null);\r\n  const [files, setFiles] = useState();\r\n  const [info, setInfo] = useState(false);\r\n  const CloseInfo = () => {\r\n    setInfo(false);\r\n  };\r\n  const pickImageHandler = () => {\r\n    filePickerRef.current.click();\r\n  };\r\n\r\n  const sendMessage = async (img) => {\r\n    try {\r\n      const formData = new FormData();\r\n      formData.append(\"userId\", userId);\r\n      formData.append(\"roomId\", roomInfo._id);\r\n      formData.append(\"img\", img);\r\n      const response = await request(\r\n        process.env.REACT_APP_BACKEND_URL + \"/messages/send\",\r\n        \"post\",\r\n        formData,\r\n        {\r\n          Authorization: \"Bearer \" + token,\r\n        }\r\n      );\r\n      serverSendMessage(response.data.message);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const pickedHandler = (event) => {\r\n    if (event.target.files && event.target.files.length === 1) {\r\n      sendMessage(event.target.files[0]);\r\n    }\r\n  };\r\n  return (\r\n    <div className=\"chat__messages__header\">\r\n      {error && (\r\n        <ErrorModal state=\"error\" closeModal={clearError} message={error} />\r\n      )}\r\n      {loading && <Loading />}\r\n      {roomInfo && (\r\n        <>\r\n          <div className=\"chat__messages__header__user\">\r\n            <div className=\"chat__messages__header--img\">\r\n              <img src={roomInfo.chatIcon} alt=\"aa\" />\r\n            </div>\r\n            <h2>{roomInfo.name}</h2>\r\n          </div>\r\n          <div className=\"chat__messages__header--options\">\r\n            <div className=\"icon\" onClick={pickImageHandler}>\r\n              <Attachment />\r\n              <input\r\n                ref={filePickerRef}\r\n                style={{ display: \"none\" }}\r\n                type=\"file\"\r\n                accept=\".png,.jpg,.jpeg,.pdf,.svg\"\r\n                onChange={pickedHandler}\r\n              />\r\n            </div>\r\n\r\n            {info && (\r\n              <div className=\"chat__room__wrapper\" onClick={CloseInfo}>\r\n                <ChatInfo CloseInfo={CloseInfo} roomId={roomInfo._id} />\r\n              </div>\r\n            )}\r\n            <div\r\n              className={`icon`}\r\n              onClick={(e) => {\r\n                e.stopPropagation();\r\n                setInfo((e) => !e);\r\n              }}\r\n            >\r\n              <Arrow />\r\n            </div>\r\n          </div>\r\n        </>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\nexport default CahtHeader;\r\n\r\n"]},"metadata":{},"sourceType":"module"}