{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\Desktop\\\\dpma\\\\frontend\\\\src\\\\components\\\\users\\\\profile\\\\profile.jsx\";\nimport React, { useEffect, useState, useRef } from \"react\";\nimport { useSelector } from \"react-redux\";\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\nimport ProfileBoard from \"./profile-board\";\nimport ProfileFeed from \"./profile-feed\";\nimport ProfilePlaceholer from \"../../placeholders/profile-placehoder\";\nimport { Redirect } from \"react-router-dom\";\nimport history from \"../../../history\";\n\nconst Profile = props => {\n  const {\n    loading,\n    request,\n    error\n  } = useFetch();\n  const [user, setUser] = useState(null);\n  const [img, setImg] = useState(null);\n  const currentUser = useSelector(state => state.currentUser);\n  const id = props.match.params.id;\n\n  const changeTitle = title => {\n    document.title = title;\n  };\n\n  const fetchProfileData = async () => {\n    try {\n      const res = await request(process.env.REACT_APP_BACKEND_URL + `/users/${id}`);\n      setUser(res.data.user);\n      if (res.data.user && res.data.user.username) changeTitle(res.data.user.username);\n    } catch (err) {\n      console.log(err);\n    }\n  };\n\n  const changeImg = img => {\n    setImg(img);\n  };\n\n  useEffect(() => {\n    fetchProfileData();\n  }, [id]);\n\n  if (!loading && user && user._id && currentUser && currentUser.token) {\n    const isProfile = currentUser._id === user._id;\n\n    if (isProfile && props.match.path === \"/user/:id\") {\n      return React.createElement(Redirect, {\n        to: `/profile/${user._id}`,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 39\n        },\n        __self: this\n      });\n    }\n\n    if (!isProfile && props.match.path === \"/profile/:id\") return React.createElement(Redirect, {\n      to: `/user/${id}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 42\n      },\n      __self: this\n    });\n    return React.createElement(\"div\", {\n      className: `profile ${isProfile ? \"mt-2\" : \"\"}`,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 44\n      },\n      __self: this\n    }, !isProfile && React.createElement(\"div\", {\n      className: \"profile__header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 46\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"profile__header--icon\",\n      onClick: () => history.goBack(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 47\n      },\n      __self: this\n    }, React.createElement(\"svg\", {\n      viewBox: \"0 0 24 24\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"g\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"path\", {\n      d: \"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    })))), React.createElement(\"h2\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 57\n      },\n      __self: this\n    }, user.username)), React.createElement(ProfileBoard, {\n      user: user,\n      img: img,\n      setImg: changeImg,\n      isProfile: isProfile,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 60\n      },\n      __self: this\n    }), React.createElement(ProfileFeed, {\n      length: user.posts.length,\n      user: currentUser,\n      id: id,\n      isProfile: isProfile,\n      img: img || user.img,\n      username: user.username,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }));\n  }\n\n  return React.createElement(ProfilePlaceholer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77\n    },\n    __self: this\n  });\n};\n\nexport default Profile;","map":{"version":3,"sources":["C:/Users/GIGABYTE/Desktop/dpma/frontend/src/components/users/profile/profile.jsx"],"names":["React","useEffect","useState","useRef","useSelector","useFetch","ProfileBoard","ProfileFeed","ProfilePlaceholer","Redirect","history","Profile","props","loading","request","error","user","setUser","img","setImg","currentUser","state","id","match","params","changeTitle","title","document","fetchProfileData","res","process","env","REACT_APP_BACKEND_URL","data","username","err","console","log","changeImg","_id","token","isProfile","path","goBack","posts","length"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useRef } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\r\nimport ProfileBoard from \"./profile-board\";\r\nimport ProfileFeed from \"./profile-feed\";\r\nimport ProfilePlaceholer from \"../../placeholders/profile-placehoder\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport history from \"../../../history\";\r\n\r\nconst Profile = (props) => {\r\n  const { loading, request, error } = useFetch();\r\n  const [user, setUser] = useState(null);\r\n  const [img, setImg] = useState(null);\r\n  const currentUser = useSelector((state) => state.currentUser);\r\n  const id = props.match.params.id;\r\n  const changeTitle=(title)=>{\r\n    document.title=title;\r\n  }\r\n  const fetchProfileData = async () => {\r\n    try {\r\n      const res = await request(\r\n        process.env.REACT_APP_BACKEND_URL + `/users/${id}`\r\n      );\r\n      setUser(res.data.user);\r\n      if(res.data.user && res.data.user.username) changeTitle(res.data.user.username);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n  const changeImg = (img) => {\r\n    setImg(img);\r\n  };\r\n  useEffect(() => {\r\n    fetchProfileData();\r\n  }, [id]);\r\n  if (!loading && user && user._id && currentUser && currentUser.token) {\r\n    const isProfile = currentUser._id === user._id;\r\n    if (isProfile && props.match.path === \"/user/:id\") {\r\n      return <Redirect to={`/profile/${user._id}`} />;\r\n    }\r\n    if (!isProfile && props.match.path === \"/profile/:id\")\r\n      return <Redirect to={`/user/${id}`} />;\r\n    return (\r\n      <div className={`profile ${isProfile ? \"mt-2\" : \"\"}`}>\r\n        {!isProfile && (\r\n          <div className=\"profile__header\">\r\n            <div\r\n              className=\"profile__header--icon\"\r\n              onClick={() => history.goBack()}\r\n            >\r\n              <svg viewBox=\"0 0 24 24\">\r\n                <g>\r\n                  <path d=\"M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z\"></path>\r\n                </g>\r\n              </svg>\r\n            </div>\r\n            <h2>{user.username}</h2>\r\n          </div>\r\n        )}\r\n        <ProfileBoard\r\n          user={user}\r\n          img={img}\r\n          setImg={changeImg}\r\n          isProfile={isProfile}\r\n        />\r\n        <ProfileFeed\r\n          length={user.posts.length}\r\n          user={currentUser}\r\n          id={id}\r\n          isProfile={isProfile}\r\n          img={img || user.img}\r\n          username={user.username}\r\n        />\r\n      </div>\r\n    );\r\n  }\r\n  return <ProfilePlaceholer />;\r\n};\r\nexport default Profile;\r\n"]},"metadata":{},"sourceType":"module"}