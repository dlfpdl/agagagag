{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\GIGABYTE\\\\Desktop\\\\dpma\\\\frontend\\\\src\\\\components\\\\users\\\\settings\\\\account-settings.jsx\";\nimport React, { useState } from \"react\";\nimport Loading from \"../../../shared/loading.js\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { useForm } from \"react-hook-form\";\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\n\nconst AccountSettings = () => {\n  const {\n    register,\n    handleSubmit,\n    errors,\n    reset,\n    watch\n  } = useForm();\n  const {\n    loading,\n    error,\n    request,\n    clearError\n  } = useFetch();\n  const user = useSelector(state => state.currentUser);\n  const dispatch = useDispatch();\n  const [address, setAddress] = useState();\n  const [success, setSuccess] = useState(null);\n\n  const onSubmit = async data => {\n    try {\n      const response = await request(process.env.REACT_APP_BACKEND_URL + `/users/update-info/${user._id}`, \"patch\", data, {\n        Authorization: \"Bearer \" + user.token\n      });\n      setSuccess(true);\n      clearError();\n      dispatch({\n        type: \"USER_DATA_IN\",\n        payload: { ...response.data,\n          expiration: user.expiration,\n          token: user.token\n        }\n      });\n      localStorage.setItem(\"userData2\", JSON.stringify({ ...response.data,\n        expiration: user.expiration,\n        token: user.token\n      }));\n    } catch (err) {\n      console.log(err.response);\n    }\n  };\n\n  const watchFields = watch(['name', 'bio', 'birth', 'livesIn', 'from', 'gender']);\n\n  if (user && user.token) {\n    return React.createElement(\"div\", {\n      className: \"settings__block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 50\n      },\n      __self: this\n    }, React.createElement(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 51\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 52\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 53\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \" \",\n      type: \"text\",\n      defaultValue: user.name,\n      name: \"name\",\n      className: \"form__input\",\n      ref: register({\n        minLength: 6,\n        maxLength: 32,\n        required: true\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 54\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66\n      },\n      __self: this\n    }, \"Name\")), errors.name && React.createElement(\"div\", {\n      className: \"form__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 69\n      },\n      __self: this\n    }, \"name must be more than 5 and less than 21 chars\")), React.createElement(\"div\", {\n      className: \"form__control dup\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \" \",\n      type: \"text\",\n      defaultValue: user.about && user.about.livesIn ? user.about.livesIn : null,\n      name: \"livesIn\",\n      className: \"form__input\",\n      ref: register({\n        minLength: 6,\n        maxLength: 32\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Lives In\"), errors.livesIn && React.createElement(\"div\", {\n      className: \"form__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, \"Invalid input\")), React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \" \",\n      type: \"text\",\n      name: \"from\",\n      className: \"form__input\",\n      ref: register({\n        minLength: 6,\n        maxLength: 32\n      }),\n      defaultValue: user.about && user.about.from ? user.about.from : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, \"From\"), errors.from && React.createElement(\"div\", {\n      className: \"form__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, \"invalid\"))), React.createElement(\"div\", {\n      className: \"form__control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120\n      },\n      __self: this\n    }, React.createElement(\"select\", {\n      placeholder: \" \",\n      name: \"gender\",\n      className: \"form__input\",\n      ref: register,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121\n      },\n      __self: this\n    }, React.createElement(\"option\", {\n      value: \"\",\n      selected: user.about.gender,\n      disabled: true,\n      hidden: true,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }), React.createElement(\"option\", {\n      value: \"male\",\n      selected: user.about.gender === \"male\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"male\"), React.createElement(\"option\", {\n      value: \"female\",\n      selected: user.about.gender === \"female\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, \"female\")), React.createElement(\"label\", {\n      className: \"form__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132\n      },\n      __self: this\n    }, \"Gender\"))), React.createElement(\"div\", {\n      className: \"form__control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 135\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 136\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      placeholder: \" \",\n      type: \"date\",\n      name: \"birth\",\n      className: \"form__input\",\n      ref: register({\n        validate: d => {\n          return d.split('-')[0] <= new Date().getFullYear();\n        }\n      }),\n      defaultValue: user.about && user.about.birth ? user.about.birth : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form__label\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 151\n      },\n      __self: this\n    }, \"Date Of Birth\")), errors.birth && React.createElement(\"div\", {\n      className: \"form__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 154\n      },\n      __self: this\n    }, \"invalid date\")), React.createElement(\"div\", {\n      className: \"form__control\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 159\n      },\n      __self: this\n    }, React.createElement(\"div\", {\n      className: \"form__unit\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 160\n      },\n      __self: this\n    }, React.createElement(\"textarea\", {\n      placeholder: \" \",\n      name: \"bio\",\n      className: \"form__textarea\",\n      ref: register({\n        minLength: 2,\n        maxLength: 32\n      }),\n      defaultValue: user.about && user.about.bio ? user.about.bio : null,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 161\n      },\n      __self: this\n    }), React.createElement(\"label\", {\n      className: \"form__label-area\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 173\n      },\n      __self: this\n    }, \"Bio\")), errors.bio && React.createElement(\"div\", {\n      className: \"form__error\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 176\n      },\n      __self: this\n    }, \"bio must be less than 256 chars\")), React.createElement(\"button\", {\n      disabled: loading || user.name === watchFields.name && !watchFields.gender && !watchFields.birth && !watchFields.from && !watchFields.livesIn && !watchFields.bio,\n      className: \"btn btn--contained1-primary mg-none block\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181\n      },\n      __self: this\n    }, \"save changes\")), success && React.createElement(\"h6\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 185\n      },\n      __self: this\n    }, \"Your information was updated successfully \"));\n  }\n\n  return React.createElement(Loading, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190\n    },\n    __self: this\n  });\n};\n\nexport default AccountSettings;","map":{"version":3,"sources":["C:/Users/GIGABYTE/Desktop/dpma/frontend/src/components/users/settings/account-settings.jsx"],"names":["React","useState","Loading","useSelector","useDispatch","useForm","useFetch","AccountSettings","register","handleSubmit","errors","reset","watch","loading","error","request","clearError","user","state","currentUser","dispatch","address","setAddress","success","setSuccess","onSubmit","data","response","process","env","REACT_APP_BACKEND_URL","_id","Authorization","token","type","payload","expiration","localStorage","setItem","JSON","stringify","err","console","log","watchFields","name","minLength","maxLength","required","about","livesIn","from","gender","validate","d","split","Date","getFullYear","birth","bio"],"mappings":"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","sourcesContent":["import React, { useState } from \"react\";\r\nimport Loading from \"../../../shared/loading.js\";\r\nimport { useSelector,useDispatch } from \"react-redux\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { useFetch } from \"../../../shared/hooks/useFetch\";\r\nconst AccountSettings = () => {\r\n  const { register, handleSubmit, errors, reset,watch } = useForm();\r\n  const { loading, error, request, clearError } = useFetch();\r\n  const user = useSelector((state) => state.currentUser);\r\n  const dispatch = useDispatch();\r\n  const [address, setAddress] = useState();\r\n  const [success, setSuccess] = useState(null);\r\n const onSubmit = async (data) => {\r\n    try {\r\n      const response = await request(\r\n        process.env.REACT_APP_BACKEND_URL +\r\n          `/users/update-info/${user._id}`,\r\n        \"patch\",\r\n        data,\r\n        {\r\n          Authorization: \"Bearer \" + user.token,\r\n        }\r\n      );\r\n      setSuccess(true);\r\n      clearError();\r\n       dispatch({\r\n      type: \"USER_DATA_IN\",\r\n      payload: {\r\n        ...response.data,\r\n        expiration: user.expiration,\r\n        token:user.token\r\n      },\r\n    });\r\n    localStorage.setItem(\r\n      \"userData2\",\r\n      JSON.stringify({\r\n         ...response.data,\r\n        expiration: user.expiration,\r\n        token:user.token\r\n      })\r\n    ); \r\n    } catch (err) {\r\n      console.log(err.response);\r\n    }\r\n  };\r\n  \r\n  const watchFields = watch(['name', 'bio','birth','livesIn','from','gender']);\r\n  if (user && user.token) {\r\n    return (\r\n      <div className=\"settings__block\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n          <div className=\"form__control\">\r\n            <div className=\"form__unit\">\r\n              <input\r\n                placeholder=\" \"\r\n                type=\"text\"\r\n                defaultValue={user.name}\r\n                name=\"name\"\r\n                className=\"form__input\"\r\n                ref={register({\r\n                  minLength: 6,\r\n                  maxLength: 32,\r\n                  required:true\r\n                })}\r\n              />\r\n              <label className=\"form__label\">Name</label>\r\n            </div>\r\n            {errors.name && (\r\n              <div className=\"form__error\">\r\n                name must be more than 5 and less than 21 chars\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"form__control dup\">\r\n            <div className=\"form__unit\">\r\n              <input\r\n                placeholder=\" \"\r\n                type=\"text\"\r\n                defaultValue={\r\n                  user.about && user.about.livesIn ? user.about.livesIn : null\r\n                }\r\n                name=\"livesIn\"\r\n                className=\"form__input\"\r\n                ref={register({\r\n                  minLength: 6,\r\n                  maxLength: 32,\r\n                })}\r\n              />\r\n              <label className=\"form__label\">Lives In</label>\r\n               {errors.livesIn && (\r\n              <div className=\"form__error\">\r\n                Invalid input\r\n              </div>\r\n            )}\r\n            </div>\r\n             \r\n            <div className=\"form__unit\">\r\n              <input\r\n                placeholder=\" \"\r\n                type=\"text\"\r\n                name=\"from\"\r\n                className=\"form__input\"\r\n                ref={register({\r\n                  minLength: 6,\r\n                  maxLength: 32,\r\n                })}\r\n                defaultValue={\r\n                  user.about && user.about.from ? user.about.from : null\r\n                }\r\n              />\r\n              <label className=\"form__label\">From</label>\r\n               {errors.from && (\r\n              <div className=\"form__error\">\r\n               invalid\r\n              </div>\r\n            )}\r\n            </div>\r\n          </div>\r\n          <div className=\"form__control\">\r\n            <div className=\"form__unit\">\r\n              <select \r\n                placeholder=\" \"\r\n                name=\"gender\"\r\n                className=\"form__input\"\r\n                ref={register}\r\n                \r\n              >\r\n              <option value=\"\" selected={user.about.gender} disabled hidden />\r\n              <option value=\"male\" selected={user.about.gender===\"male\"} >male</option>\r\n              <option value=\"female\" selected={user.about.gender===\"female\"}>female</option>\r\n              </select>\r\n              <label className=\"form__label\">Gender</label>\r\n            </div>\r\n            </div>\r\n          <div className=\"form__control\">\r\n            <div className=\"form__unit\">\r\n              <input\r\n                placeholder=\" \"\r\n                type=\"date\"\r\n                name=\"birth\"\r\n                className=\"form__input\"\r\n                ref={register({\r\n                  validate:(d)=>{\r\n                    return d.split('-')[0] <= new Date().getFullYear();\r\n                  }\r\n                })}\r\n                defaultValue={\r\n                  user.about && user.about.birth ? user.about.birth : null\r\n                }\r\n              />\r\n              <label className=\"form__label\">Date Of Birth</label>\r\n            </div>\r\n            {errors.birth && (\r\n              <div className=\"form__error\">\r\n                invalid date\r\n              </div>\r\n            )}\r\n          </div>\r\n          <div className=\"form__control\">\r\n            <div className=\"form__unit\">\r\n              <textarea\r\n                placeholder=\" \"\r\n                name=\"bio\"\r\n                className=\"form__textarea\"\r\n                ref={register({\r\n                  minLength: 2,\r\n                  maxLength: 32,\r\n                })}\r\n                defaultValue={\r\n                  user.about && user.about.bio ? user.about.bio : null\r\n                }\r\n              />\r\n              <label className=\"form__label-area\">Bio</label>\r\n            </div>\r\n             {errors.bio && (\r\n              <div className=\"form__error\">\r\n                bio must be less than 256 chars\r\n              </div>\r\n            )}\r\n          </div>\r\n          <button disabled={loading ||  ( user.name === watchFields.name && !watchFields.gender && !watchFields.birth && !watchFields.from && !watchFields.livesIn && !watchFields.bio )} className=\"btn btn--contained1-primary mg-none block\">\r\n            save changes\r\n          </button>\r\n        </form>\r\n              {success && <h6>Your information was updated successfully </h6>}\r\n\r\n      </div>\r\n    );\r\n  }\r\n  return <Loading />;\r\n};\r\nexport default AccountSettings;\r\n"]},"metadata":{},"sourceType":"module"}